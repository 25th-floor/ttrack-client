import { createStore, applyMiddleware } from 'redux';
import { persistStore } from 'redux-persist';
import { logger } from 'redux-logger';

import Auth, { AuthReducer } from './Auth';

import { Users, Timesheet } from './Resources';
import { config, mottos, utils } from './Constants';

let middleware = applyMiddleware(logger);

if (process.env.NODE_ENV === 'development') {
    middleware = applyMiddleware(logger);
} else {
    // exclude logger from prod and tests
    middleware = applyMiddleware();
}

export const store = createStore(
    AuthReducer,
    middleware,
    // autoRehydrate(),
);

persistStore(store);
export const Actions = {
    Auth,
};

export const Resources = {
    Users,
    Timesheet,
};

export const Constants = {
    config,
    mottos,
};

export const Utils = utils;
